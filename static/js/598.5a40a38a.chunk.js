"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[598],{3598:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(9439),a=t(1087),c=t(7689),o=t(2791),i=t(9434),u=t(4141),s=t(4164),l=t(184),d=document.querySelector("#modal-root"),f=function(e){var n=e.toggleModal,t=e.children;(0,o.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&n()};return(0,s.createPortal)((0,l.jsx)("div",{className:"Modal__backdrop",onClick:function(e){e.currentTarget===e.target&&n()},children:(0,l.jsx)("div",{className:"Modal__content",children:t})}),d)},m=t(5036),h=function(e){var n=e.toggleModal,t=(0,i.I0)(),r=(0,c.s0)(),a=(0,c.UO)().id;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Are you sure?"}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)("button",{type:"button",onClick:function(){return t((0,m._f)(a)),void r("/contacts")},children:"Confirm"})}),(0,l.jsx)("li",{children:(0,l.jsx)("button",{type:"button",onClick:function(){return n()},children:"Cancel"})})]})]})},x=function(e){var n=e.toggleModal,t=(0,c.UO)().id,a=(0,i.v9)(u.mk),s=a.filter((function(e){return e.id===t})),d=(0,o.useState)(s[0].name),f=(0,r.Z)(d,2),h=f[0],x=f[1],v=(0,o.useState)(s[0].number),b=(0,r.Z)(v,2),j=b[0],p=b[1],g=(0,i.I0)(),k=function(e){var n=e.currentTarget,t=n.name,r=n.value;switch(t){case"name":x(r);break;case"number":p(r);break;default:return}},C=function(e){w(e)?x(""):n()},w=function(e){if(a){var n=e.toLowerCase();return 0!==a.filter((function(e){return e.name.toLowerCase()===n})).length}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{onSubmit:function(e){var n=e.currentTarget.name.value;e.preventDefault(),w(n)?alert("".concat(n," is already in contacts")):g((0,m.nv)({id:t,name:h,number:j})),C(n)},children:[(0,l.jsxs)("label",{children:["Name",(0,l.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:k,value:h})]}),(0,l.jsxs)("label",{children:["Number",(0,l.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:k,value:j})]}),(0,l.jsx)("button",{variant:"contained",type:"submit",children:"Save changes"})]}),(0,l.jsx)("button",{variant:"contained",type:"button",onClick:function(){return n()},children:"Cancel"})]})},v=function(){var e=(0,o.useState)(!1),n=(0,r.Z)(e,2),t=n[0],s=n[1],d=(0,o.useState)(""),m=(0,r.Z)(d,2),v=m[0],b=m[1],j=(0,o.useState)(null),p=(0,r.Z)(j,2),g=p[0],k=p[1],C=(0,c.TH)(),w=(0,c.UO)().id,y=(0,i.v9)(u.mk).filter((function(e){return e.id===w})),M=(0,i.v9)(u.ts);(0,o.useEffect)((function(){k(M)}),[M]);var _=function(){s(!t),b("delete")},L=function(){s(!t),b("edit")};return(0,l.jsx)(l.Fragment,{children:y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.rU,{to:C.state.from,children:"Go back"}),null===g?(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:y[0].name}),(0,l.jsx)("p",{children:y[0].number})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:M.name}),(0,l.jsx)("p",{children:M.number})]}),(0,l.jsx)("button",{type:"button",onClick:_,children:"Delete user"}),t&&"delete"===v&&(0,l.jsx)(f,{toggleModal:_,children:(0,l.jsx)(h,{toggleModal:_})}),(0,l.jsx)("button",{type:"button",onClick:L,children:"Edit user"}),t&&"edit"===v&&(0,l.jsx)(f,{toggleModal:L,children:(0,l.jsx)(x,{toggleModal:L})})]})})}},4141:function(e,n,t){t.d(n,{F4:function(){return i},Vc:function(){return a},by:function(){return c},mk:function(){return r},ts:function(){return o}});var r=function(e){return e.contacts.contacts},a=function(e){return e.contacts.isLoading},c=function(e){return e.contacts.error},o=function(e){return e.contacts.currentUser},i=function(e){var n=e.contacts,t=n.contacts,r=(n.isLoading,n.error,e.filter);if(!r)return t;return function(){var e=r.toLowerCase();return t.filter((function(n){return n.name.toLowerCase().includes(e)}))}()}}}]);
//# sourceMappingURL=598.5a40a38a.chunk.js.map